<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>Emoji Road ‚Äì Zoo & Phoenix + Bases & Index</title>
<style>
:root{
  --bg1:#0b0c12;--bg2:#0f0f13;--panel:#171922;--panel-soft:#121421;
  --road:#cc1f1f;--text:#e9ecf1;--muted:#aab3c0;
}
*{box-sizing:border-box;-webkit-user-select:none;user-select:none}
html,body{height:100%}
body{
  margin:0;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:var(--text);background:linear-gradient(180deg,var(--bg1),var(--bg2));
}
header{
  padding:8px 10px;background:#10121a;border-bottom:1px solid #232738;
  display:flex;gap:6px;align-items:center;flex-wrap:wrap;font-size:13px;
}
.stat{
  padding:4px 8px;background:#171922;border:1px solid #232738;
  border-radius:10px;font-weight:600;
}
.btn{
  appearance:none;border:1px solid #2b3044;background:#1e2231;color:var(--text);
  padding:6px 8px;border-radius:10px;cursor:pointer;font-weight:700;font-size:12px;
}
.btn:hover{filter:brightness(1.08)}
.wrap{display:grid;grid-template-columns:320px 1fr;gap:10px;padding:10px}
@media(max-width:900px){.wrap{grid-template-columns:1fr}}
aside,main{background:#171922;border:1px solid #232738;border-radius:14px}
aside{padding:10px;max-height:calc(100vh - 90px);overflow:auto}
aside h2,main h2{margin:4px 0 8px;font-size:15px;color:#cbd5e1}
.section-title{margin-top:8px;font-size:13px;font-weight:700;color:#e2e8f0}
.small{font-size:12px;color:var(--muted)}

.legend{display:grid;gap:4px;grid-template-columns:repeat(2,minmax(0,1fr))}
.legend .row{
  display:flex;justify-content:space-between;gap:4px;padding:4px 6px;border-radius:9px;
  background:#121421;border:1px solid #20233a;font-size:12px;
}
.chip{padding:2px 6px;border-radius:999px;font-weight:800;color:#0d0f16;font-size:11px}

.road-wrap{position:relative;padding:8px;height:360px;display:flex;flex-direction:column;gap:6px}
@media(max-width:600px){.road-wrap{height:50vh}}
.road{
  position:relative;flex:1;border-radius:14px;background:#cc1f1f;
  overflow:hidden;border:2px solid #801919;box-shadow:inset 0 0 30px rgba(0,0,0,.35);
  touch-action:manipulation;
}
.lane{position:absolute;left:0;right:0;height:3px;
  background:repeating-linear-gradient(90deg,#ffd9d9 0 30px,transparent 30px 60px);
  opacity:.35;pointer-events:none}
.lane:nth-child(1){top:33%}
.lane:nth-child(2){top:50%}
.lane:nth-child(3){top:67%}

.spawn{
  position:absolute;font-size:28px;line-height:1;cursor:pointer;
  touch-action:manipulation;-webkit-tap-highlight-color:transparent;
  padding:8px;border-radius:10px;filter:drop-shadow(0 2px 0 rgba(0,0,0,.25));
  transform:translateY(-50%);
}
.tag{
  position:absolute;top:-18px;left:50%;transform:translateX(-50%);
  padding:2px 6px;border-radius:999px;font-size:10px;white-space:nowrap;
  font-weight:800;color:#0d0f16;
}

.base{padding:8px;display:grid;gap:8px;grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}
.card{
  background:#121421;border:1px solid #20233a;border-radius:12px;
  padding:8px;display:flex;gap:8px;align-items:flex-start;font-size:13px;
}
.card .big{font-size:30px}
.card h4{margin:0;font-size:13px}
.row-btns{display:flex;gap:4px;flex-wrap:wrap;margin-top:4px}
.btn-mini{
  border:1px solid #2b3044;background:#171b29;color:#d7deea;
  padding:4px 6px;border-radius:7px;cursor:pointer;font-size:11px;font-weight:700;
}
.btn-mini.sell{background:#25161a;border-color:#5a2631}
.btn-mini.feed{background:#14231c;border-color:#264d3a}
.btn-mini.open{background:#1d2234;border-color:#33406a}
.btn-mini.buy{background:#16211f;border-color:#264d3a}
.btn-mini.trade{background:#231c32;border-color:#413066}
.btn-mini.luck{background:#112623;border-color:#1f4c44}
.btn-mini.zoo{background:#1c2430;border-color:#30435f}
.btn-mini.door{background:#26152a;border-color:#553153}

.toast{
  position:fixed;right:10px;bottom:10px;display:flex;
  flex-direction:column-reverse;gap:6px;z-index:9999;font-size:13px;
}
.toast .t{
  background:#0e111b;border:1px solid #303653;padding:8px 10px;
  border-radius:9px;box-shadow:0 10px 30px rgba(0,0,0,.4);max-width:300px;
}

.workshops{padding:8px;border-top:1px solid #232738}
.ws{background:#101423;border:1px solid #232738;border-radius:12px;padding:8px;margin-bottom:8px}
.ws h3{margin:0 0 4px;font-size:14px}
.pill{
  display:inline-block;padding:2px 6px;border-radius:999px;background:#0e152b;
  border:1px solid #2a3a64;margin-right:4px;font-size:11px;
}
.dealer-grid,.trader-grid,#zooShop{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:4px;margin-top:4px;
}
.dealer-card,.trader-card,.zoo-card{
  background:#101423;border-radius:10px;border:1px solid #232738;padding:6px;font-size:11px;
}
.dealer-card-emoji,.trader-card-emoji,.zoo-emoji{font-size:20px;margin-bottom:2px}
.index-box{margin-top:4px;padding:6px 8px;border-radius:8px;background:#101423;border:1px solid #232738;max-height:180px;overflow:auto}

/* money pop */
@keyframes pop{from{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}
.money-up{animation:pop .5s ease}
.glowwhite{filter:drop-shadow(0 0 4px #fff) drop-shadow(0 0 12px #fff)}

/* rarity colors */
.r-Common{background:#e5ecf6}
.r-Uncommon{background:#b6f3c9}
.r-Rare{background:#a3d0ff}
.r-Epic{background:#c8a9ff}
.r-Legendary{background:#ffd176}
.r-Mythical{background:#ff9ed1}
.r-Godly{background:#ff7f7f}
.r-Secret{background:#9bf4ff}
.r-Troll{background:#ffdf8f}
.r-Exotic{background:#baff9f}
.r-Ultra\ Exotic{background:#fff59b}
.r-Insane{background:#ffb39b}
.r-Transcendent{background:#9bffe7}
.r-INSANELY\ TRANSCENDENT{background:#ffffff}
.r-Newgen{background:linear-gradient(90deg,#fff8d1,#b5ffef)}
.r-OG{background:linear-gradient(90deg,#fff,#ffd859,#fff);color:#111}
.r-Godly\ Lucky\ Block{background:#ffd1d1}
.r-Secret\ Lucky\ Block{background:#d1f7ff}
.r-Insane\ Lucky\ Block{background:#ffc6b5}
.r-Mythic\ Lucky\ Block{background:#ffe0ff}
.r-Trick\ Door{background:#fdd3ff}

/* BASE THEMES */
body.base-default{
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
}
body.base-fruit{
  background:radial-gradient(circle at top,#274e1f,#050608 70%);
}
body.base-neon{
  background:radial-gradient(circle at top,#1f1650,#020312 70%);
}
body.base-rainbow{
  background:linear-gradient(135deg,#ff9a9e,#fad0c4,#fbc2eb,#a6c1ee);
}
body.base-magma{
  background:radial-gradient(circle at top,#3b0600,#050000 70%);
}
body.base-safari{
  background:linear-gradient(180deg,#3b351c,#0b0c12);
}
body.base-futuristic{
  background:radial-gradient(circle at top,#00f5ff,#020617 70%);
}

body.base-fruit .road{background:#305f2c;border-color:#214020;}
body.base-neon .road{background:#141433;border-color:#262b6b;}
body.base-rainbow .road{background:#ff8fa3;border-color:#cf4f7b;}
body.base-magma .road{background:#4a1b18;border-color:#8a291c;}
body.base-safari .road{background:#5b4b28;border-color:#3f341c;}
body.base-futuristic .road{background:#0f172a;border-color:#233876;}
</style>
</head>
<body class="base-default">
<header>
  <div class="stat" id="cashStat">$0</div>
  <div class="stat" id="rateStat">0 / sec</div>
  <div class="stat" id="rebirthStat">Rebirths: 0 (x1.00)</div>
  <div class="stat" id="luckStat">Luck: 1x</div>
  <div class="stat" id="safariStat">Safari: 0</div>
  <button class="btn" id="pauseBtn">Pause</button>
  <button class="btn" id="rebirthBtn">Rebirth</button>
  <button class="btn" id="phoenixBtn">Phoenix Rebirth</button>
</header>

<div class="wrap">
  <aside>
    <h2>Rarities</h2>
    <div class="legend" id="legend"></div>

    <div class="section-title">Dealer (3 min, up to 10 each)</div>
    <div class="small" id="dealerStatus">Restocking‚Ä¶</div>
    <div class="dealer-grid" id="dealerGrid"></div>

    <div class="section-title">Trader (1 trade)</div>
    <div class="small" id="traderStatus">Trader away.</div>
    <div class="trader-grid" id="traderGrid"></div>

    <div class="section-title">Mr Luck üçÄ</div>
    <div class="small">15-min luck boosts for high rarities.</div>
    <div id="luckShop"></div>

    <div class="section-title">Zoo (Safari Tokens)</div>
    <div class="small" id="safariInfo">Safari Tokens: 0</div>
    <div id="zooShop"></div>
    <div class="small" id="zooOwned" style="margin-top:4px;">Animals: none</div>

    <div class="section-title">Achievements</div>
    <div class="small" id="achievementsBox">None yet.</div>

    <div class="section-title">Bases</div>
    <div class="small" id="baseHint">Unlock bases by collecting special stuff.</div>
    <div id="baseList" class="index-box"></div>

    <div class="section-title">Emoji Index</div>
    <div class="small" id="indexSummary">0 / ? discovered</div>
    <div id="indexList" class="index-box"></div>
  </aside>

  <main>
    <div class="road-wrap">
      <h2 style="padding:0 4px">Red Road ‚Äî tap to buy</h2>
      <div class="road" id="road">
        <div class="lane"></div>
        <div class="lane"></div>
        <div class="lane"></div>
      </div>
    </div>

    <div class="base-wrap">
      <h2 style="padding:8px">Your Base</h2>
      <div class="base" id="base"></div>

      <div class="workshops">
        <div class="ws">
          <h3>üî∑ Fuse Machine</h3>
          <div class="small">Pick 4 of same rarity ‚Üí 1 next rarity.</div>
          <div class="small" id="fuseHint"></div>
          <div id="fuseList" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:6px;margin:6px 0;"></div>
          <span class="pill" id="fuseCountPill">Selected: 0/4</span>
          <button class="btn" id="fuseBtn">Fuse</button>
        </div>

        <div class="ws">
          <h3>üõ†Ô∏è Craft Machine</h3>
          <div class="small">Special recipes (can‚Äôt spawn on road):</div>
          <div id="craftList" style="margin-top:4px;display:grid;gap:4px;"></div>
        </div>

        <div class="ws">
          <h3>üêâ Dragon Lord Shrine</h3>
          <div class="small">Feed 1 Beef ü•© (Mythic) for a tiny chance at Dragon üêâ (INSANELY TRANSCENDENT).</div>
          <button class="btn-mini" id="dragonBtn">Offer Beef</button>
          <span class="pill small" id="beefCountPill">Beef: 0</span>
        </div>
      </div>
    </div>
  </main>
</div>

<div class="toast" id="toast"></div>

<script>
/* ===== tiny sound ===== */
let audioCtx=null;
function ac(){if(!audioCtx){try{audioCtx=new (window.AudioContext||window.webkitAudioContext)();}catch(e){}}return audioCtx;}
function beep(f=440,d=0.1,v=0.12){const c=ac();if(!c)return;const o=c.createOscillator(),g=c.createGain();o.type='square';o.frequency.value=f;o.connect(g);g.connect(c.destination);const t=c.currentTime;g.gain.value=0.0001;g.gain.exponentialRampToValueAtTime(v,t+0.01);g.gain.exponentialRampToValueAtTime(0.0001,t+d);o.start(t);o.stop(t+d+0.02);}
const sClick=()=>beep(520,0.08,0.08),sBuy=()=>beep(720,0.12,0.12),sRare=()=>beep(880,0.16,0.12);

/* ===== data ===== */
const rarities=[
  {name:'Common',rate:1,cost:10,weight:520},
  {name:'Uncommon',rate:3,cost:40,weight:240},
  {name:'Rare',rate:8,cost:150,weight:110},
  {name:'Epic',rate:20,cost:500,weight:55},
  {name:'Legendary',rate:60,cost:2200,weight:16},
  {name:'Mythical',rate:160,cost:8000,weight:6},
  {name:'Godly',rate:420,cost:30000,weight:3},
  {name:'Secret',rate:1000,cost:120000,weight:1.3},
  {name:'Troll',rate:9000,cost:600000,weight:0},
  {name:'Exotic',rate:2500,cost:400000,weight:0.8},
  {name:'Ultra Exotic',rate:6000,cost:1200000,weight:0.45},
  {name:'Insane',rate:15000,cost:4000000,weight:0.25},
  {name:'Transcendent',rate:42000,cost:12000000,weight:0.12},
  {name:'INSANELY TRANSCENDENT',rate:120000,cost:55000000,weight:0.05},
  {name:'Newgen',rate:220000,cost:110000000,weight:0.03},
  {name:'OG',rate:400000,cost:200000000,weight:0.01},
  {name:'Godly Lucky Block',rate:0,cost:150000,weight:1.0},
  {name:'Secret Lucky Block',rate:0,cost:350000,weight:0.6},
  {name:'Insane Lucky Block',rate:0,cost:900000,weight:0.25},
  {name:'Mythic Lucky Block',rate:0,cost:250000,weight:0.8},
  {name:'Trick Door',rate:0,cost:45000,weight:0.4}
];
const rarityByName=n=>rarities.find(r=>r.name===n);

/* OG text pool */
const OG_TEXT_POOL=[':3','$','*','(:','¬•','¬£','‚Ç¨','¬ß','%'];

/* spawn pools */
const nichePool=['üö°','üö†','‚òîÔ∏è','ü™´','üßó‚Äç‚ôÇÔ∏è','üß¨','üõ∞Ô∏è','üß™','üõü','üßä','ü•∂','üßØ','üß≤','üõ¢Ô∏è','üõó','üõ§Ô∏è','üß≠','ü™µ','ü™ô'];
const commonPool=['üòÄ','üôÅ','ü¶ä','üê±','üê≠','üêπ','üêº','üêß','üê§','üåø','üçâ','üçî','üçü','üç™','üç©','‚öΩÔ∏è','üèÄ','üé≤','üéà','üéÆ','üì¶','‚≠êÔ∏è','üíé','üî•','üåà','üåô'];

/* 30+ fruits & veggies */
const FRUIT_EMOJIS=[
 'üçè','üçé','üçê','üçä','üçã','üçì','üçá','üçâ','üçå','üçã‚Äçüü©','ü´ê','üçà','üçí','üçë','ü•≠',
 'üçÜ','üçÖ','ü•ù','ü••','üçç','ü•ë','ü´õ','ü•¶','ü•¨','ü•í','üå∂Ô∏è','ü´ë','üåΩ','ü•ï','ü´í','üç†','ü´ú','ü•î','üßÖ','üßÑ'
];

/* big misc emoji set (+ üñï) */
const EXTRA_EMOJIS=[
 'üßë‚Äçüßë‚Äçüßí‚Äçüßí','üßë‚Äçüßí','üßë‚Äçüßí‚Äçüßí','üöª','üî£','üàÅ','üì∂','üé¶','üöÆ','üÜó','üÜô','üÜí','üÜï','üÜì','‚ÑπÔ∏è',
 'üî§','üî°','üî†','üî≥','üî≤',
 'üïí','üïó','üïú','üï°','üï¶','üïß','üï¢','üïù','üïò','üïì','üïî','üïô','üïû','üï£','üï§','üïü','üïö','üïï','üïê','üïë','üïñ','üïõ','üï†','üï•',
 '‚ô£Ô∏è','‚ô†Ô∏è',
 'üîà','üîï','üîá','üì£','üîâ','üì¢','üí¨','üí≠','üîî',
 'üá∫üá∏','üá¨üáß',
 'üçú','üí∑','ü¶¥',
 'üßë‚Äçüíª','üë©‚Äçüíª','üë®‚Äçüíª',
 'üèñÔ∏è','üßê','‚ôæÔ∏è',
 'üñï'
];

/* apply extra pools */
commonPool.push(...FRUIT_EMOJIS);
nichePool.push(...EXTRA_EMOJIS);

/* INSANELY TRANSCENDENT pool (no dragon here, dragon is special) */
const insanelyTransPool=['üå†','üì≤','üñ≤Ô∏è','üïπÔ∏è','üí∏','üìü','ü™¨','üíÆ','üëÅÔ∏è‚Äçüó®Ô∏è','üéÜ','‚õΩÔ∏è'];

/* Zoo animals (cannot spawn on road) */
const zooAnimals=[
 'ü¶Ç','ü™≥','ü™≤','üêõ','ü™∞','üï∑Ô∏è','ü¶é','ü¶ç','ü¶ì','ü¶õ','ü¶è','ü¶¨','ü¶ò','ü´è','üêé','ü¶ô','üêê','üêä','ü¶ß','üê™','üêÉ','üêñ','üê©','üêë','üêï','üêè','üêà‚Äç‚¨õ','ü¶§','ü¶ö',
 'üêá','üïäÔ∏è','ü¶´','üêøÔ∏è','ü¶î','ü¶¶','ü¶•','ü¶ù','ü¶ú','üêì','ü¶¢','ü¶®','üêÅ','üêÄ','ü¶°','ü¶ê','ü¶û','ü¶Ä','üê°','ü¶ë','üêô','ü¶ï','ü¶ü','üêû','üêù','üêó','üê∫','ü¶â','ü¶Ö',
 'üê¥','ü¶Ñ','ü¶ã','üêç','üê¨','üê≥'
];
const zooPrices={};zooAnimals.forEach((e,i)=>{zooPrices[e]=5+Math.floor(i/4)*5;});
const tRexEmoji='ü¶ñ';
zooPrices[tRexEmoji]=1500; // harder T-rex

/* special income overrides (per emoji) */
const SPECIAL_RATES={
  'E':1000000,
  '21':700000
};

/* Lucky sets (unchanged) */
const LUCKY_SETS={
  'Godly Lucky Block' :[{r:'Godly',w:60},{r:'Secret',w:24},{r:'Exotic',w:10},{r:'Ultra Exotic',w:4},{r:'Insane',w:2}],
  'Secret Lucky Block':[{r:'Secret',w:55},{r:'Exotic',w:22},{r:'Ultra Exotic',w:12},{r:'Insane',w:7},{r:'Transcendent',w:3},{r:'INSANELY TRANSCENDENT',w:1}],
  'Insane Lucky Block':[ {r:'Insane',w:65},{r:'Transcendent',w:22},{r:'INSANELY TRANSCENDENT',w:13}],
  'Mythic Lucky Block':[ {r:'Mythical',w:60},{r:'Godly',w:25},{r:'Secret',w:10},{r:'Exotic',w:5}]
};

/* Trick Door loot */
function openDoorLoot(){
  const r=Math.random()*100;
  if(r<75) return {emoji:'üç¨',rarity:'Mythical'};
  if(r<96) return {emoji:'üç≠',rarity:'Godly'};
  if(r<101) return {emoji:'üç´',rarity:'Secret'};
  if(r<102) return {emoji:'üçß',rarity:'Exotic'};
  if(r<102.5) return {emoji:'üëª',rarity:'Transcendent'};
  return {emoji:'üç¨',rarity:'Mythical'};
}

/* ===== index list (ALL emojis we track) ===== */
const ALL_INDEX_EMOJIS = Array.from(new Set([
  ...commonPool,
  ...nichePool,
  ...zooAnimals,
  tRexEmoji,
  // special customs
  'ü§∑üèø‚Äç‚ôÇÔ∏è','üç∞üêà‚Äç‚¨õ','üêà‚Äç‚¨õ','ü•Äüíîü§∑üèø‚Äç‚ôÇÔ∏èüßÆüë¥üèº',
  // OG numbers + letters
  '1','2','3','4','5','6','7','8','9','10','E','21'
]));
const ALL_INDEX_EMOJIS_SET=new Set(ALL_INDEX_EMOJIS);

/* ===== state ===== */
let money=0,rebirths=0,multiplier=1,nextId=1,paused=false;
let currentLuck=1,luckUntil=0;
let safariTokens=0;
let achievements={phoenix:false};
let dealerStock=[],traderStock=[],traderActive=false;
let bestMoneyEver=0;
let indexSeen=new Set();
let currentBaseKey='default';

const owned=new Map(); // {id,emoji,rarity,baseRate,level,isAnimal,isDoor}

const toastEl=document.getElementById('toast');
const roadEl=document.getElementById('road');
const baseEl=document.getElementById('base');
const cashStat=document.getElementById('cashStat');
const rateStat=document.getElementById('rateStat');
const rebirthStat=document.getElementById('rebirthStat');
const luckStat=document.getElementById('luckStat');
const safariStat=document.getElementById('safariStat');
const dealerStatus=document.getElementById('dealerStatus');
const dealerGrid=document.getElementById('dealerGrid');
const traderStatus=document.getElementById('traderStatus');
const traderGrid=document.getElementById('traderGrid');
const fuseListEl=document.getElementById('fuseList');
const fuseBtn=document.getElementById('fuseBtn');
const fuseCountPill=document.getElementById('fuseCountPill');
const fuseHint=document.getElementById('fuseHint');
const craftList=document.getElementById('craftList');
const luckShop=document.getElementById('luckShop');
const safariInfo=document.getElementById('safariInfo');
const zooShop=document.getElementById('zooShop');
const zooOwned=document.getElementById('zooOwned');
const achievementsBox=document.getElementById('achievementsBox');
const dragonBtn=document.getElementById('dragonBtn');
const beefCountPill=document.getElementById('beefCountPill');
const phoenixBtn=document.getElementById('phoenixBtn');
const baseList=document.getElementById('baseList');
const baseHint=document.getElementById('baseHint');
const indexSummary=document.getElementById('indexSummary');
const indexList=document.getElementById('indexList');

/* ===== BASE SYSTEM ===== */
const SAFARI_ANIMALS_FOR_BASE = Array.from(new Set([...zooAnimals, tRexEmoji]));
const BASES={
  'default':{label:'Default',condition:()=>true},
  'fruit':{label:'Fruit',condition:hasAllFruit},
  'neon':{label:'Neon',condition:()=>countHighRarity()>=20},
  'rainbow':{label:'Rainbow',condition:()=>bestMoneyEver>=10000000},
  'magma':{label:'Magma',condition:()=>achievements.phoenix===true},
  'safari':{label:'Safari',condition:hasAllSafariAnimals},
  'futuristic':{label:'Futuristic',condition:()=>indexSeen.size===ALL_INDEX_EMOJIS.length}
};

function hasAllFruit(){
  return FRUIT_EMOJIS.every(e=>indexSeen.has(e));
}
function hasAllSafariAnimals(){
  return SAFARI_ANIMALS_FOR_BASE.every(e=>indexSeen.has(e));
}
function countHighRarity(){
  let c=0;
  owned.forEach(o=>{
    if(o.rarity==='Transcendent' || o.rarity==='INSANELY TRANSCENDENT') c++;
  });
  return c;
}
function applyBaseTheme(){
  document.body.classList.remove(
    'base-default','base-fruit','base-neon','base-rainbow',
    'base-magma','base-safari','base-futuristic'
  );
  if(!BASES[currentBaseKey]) currentBaseKey='default';
  document.body.classList.add('base-'+currentBaseKey);
}
function renderBaseList(){
  baseList.innerHTML='';
  Object.entries(BASES).forEach(([key,b])=>{
    const unlocked=b.condition();
    const btn=document.createElement('button');
    btn.className='btn-mini';
    btn.textContent=b.label+(key===currentBaseKey?' (ON)':'');
    btn.disabled=!unlocked;
    if(key===currentBaseKey) btn.style.outline='2px solid #4fd1c5';
